From 7f9e5e8c52f535c1c13e177595a5ef4710c72058 Mon Sep 17 00:00:00 2001
From: Andreas Koenig <andk@cpan.org>
Date: Mon, 22 Nov 2021 12:24:23 +0100
Subject: [PATCH] replacing die with mydie in three spots

---
 lib/CPAN/Distribution.pm | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/lib/CPAN/Distribution.pm b/lib/CPAN/Distribution.pm
index 26464662..aa83b070 100644
--- a/cpan/CPAN/lib/CPAN/Distribution.pm
+++ b/cpan/CPAN/lib/CPAN/Distribution.pm
@@ -1548,8 +1548,8 @@ sub CHECKSUM_check_file {
         my $gpg = $CPAN::Config->{gpg} or
             $CPAN::Frontend->mydie("Your configuration suggests that you do not have 'gpg' installed. This is needed to verify checksums with the config variable 'check_sigs' on. Please configure it with 'o conf init gpg'");
         my $system = "gpg --batch --no-tty --output $tempfile $chk_file 2> /dev/null";
-        0 == system $system or die "gpg run was failing, cannot continue: $system";
-        open $fh, $tempfile or die "Could not open $tempfile: $!";
+        0 == system $system or $CPAN::Frontend->mydie("gpg run was failing, cannot continue: $system");
+        open $fh, $tempfile or $CPAN::Frontend->mydie("Could not open $tempfile: $!");
         local $/;
         $signed_data = <$fh>;
         close $fh;
@@ -1560,7 +1560,7 @@ sub CHECKSUM_check_file {
             local($/);
             $signed_data = <$fh>;
         } else {
-            Carp::croak "Could not open $chk_file for reading";
+            $CPAN::Frontend->mydie("Could not open $chk_file for reading");
         }
         close $fh;
     }
